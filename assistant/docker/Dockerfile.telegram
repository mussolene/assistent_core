FROM python:3.11-slim

RUN groupadd -r -g 1000 app && useradd -r -u 1000 -g app -m -d /app app
WORKDIR /app
ENV HOME=/app

COPY pyproject.toml ./
COPY assistant ./assistant
RUN pip install --no-cache-dir -e .

USER app
ENV PYTHONUNBUFFERED=1
CMD ["python", "-m", "assistant.channels.telegram"]
