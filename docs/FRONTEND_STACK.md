# Выбор стека фронтенда: Material Design, малый вес, минимум рисков

## Цели

- Переписать дашборд с Flask-шаблонов на отдельное фронтенд-приложение.
- **Material Design** (или очень близкий визуальный язык) и хороший UX.
- **Маловесность**: быстрая загрузка, небольшой runtime, разумный размер бандла.
- **Минимизация рисков**: стабильные библиотеки, предсказуемая поддержка, не «экспериментальный» стек.

---

## Ограничения и риски

| Риск | Как снизить |
|------|-------------|
| Раздувание бандла | Tree-shaking, lazy routes, не тянуть весь UI-kit сразу; выбирать библиотеки с ESM и code-splitting. |
| Сложность миграции | Оставить Flask как чистый API (REST/JSON); фронт — отдельный origin или статика от Flask; auth через cookie (как сейчас) или JWT. |
| «Мёртвые» зависимости | Выбирать стек с активной поддержкой (React, Vue, Svelte) и популярные UI-библиотеки (MUI, Vuetify). |
| Material «тяжёлый» | Использовать только нужные компоненты; рассмотреть Material Web Components (нативные) или лёгкие обёртки. |
| Несовместимость с текущим API | Явно описать контракт API (эндпоинты, сессии); при необходимости добавить тонкий слой `/api/*` в Flask. |

---

## Варианты стеков

### 1. React + Vite + MUI (Material UI)

**Состав:** React 18, Vite 5, MUI (Material UI) v6, React Router, TypeScript по желанию.

**Плюсы:**

- Самый полный **Material Design** из коробки (компоненты, темы, иконки, адаптив).
- Огромная экосистема и документация; легко нанять или найти ответы.
- Vite даёт быстрый dev и хороший production-бандл с code-splitting.
- MUI поддерживает tree-shaking; можно подключать только используемые компоненты.

**Минусы:**

- React + MUI в сумме дают не самый маленький бандл (~150–250 KB gzip на «ядро» + первые экраны).
- Нужна дисциплина: не подключать лишние зависимости.

**Риски:** низкие (проверенный стек).

**Маловесность:** средняя; улучшается за счёт lazy-роутов и отложенной подгрузки тяжёлых страниц.

---

### 2. Vue 3 + Vite + Vuetify 3

**Состав:** Vue 3 (Composition API), Vite 5, Vuetify 3, Vue Router, TypeScript по желанию.

**Плюсы:**

- **Material Design** через Vuetify (компоненты, темы, grid).
- В практике часто даёт меньший бандл, чем React + MUI, при сопоставимом наборе компонентов.
- Простая кривая входа (шаблоны, реактивность из коробки), удобно для форм и дашбордов.
- Хорошая документация и стабильная версия Vuetify 3.

**Минусы:**

- Экосистема меньше, чем у React; меньше готовых «материалов» под редкие кейсы.
- Vuetify 3 ещё не такой старый как MUI — но уже production-ready.

**Риски:** низкие.

**Маловесность:** хорошая (Vue + Vuetify обычно легче связки React + MUI при том же функционале).

---

### 3. SvelteKit + Material-style (Tailwind + компоненты)

**Состав:** SvelteKit, Tailwind CSS, либо **Material Design 3 Web** (токены/стили) + свои компоненты, либо библиотека вроде **Carbon Components Svelte** (не Material, но системный дизайн) или **Svelte Material UI (SMUI)**.

**Плюсы:**

- **Максимально маловесный** runtime: Svelte компилируется в обычный JS, нет виртуального DOM.
- Быстрая загрузка и отзывчивый интерфейс; SvelteKit даёт SSR/SSG при необходимости.
- Tailwind + кастомные компоненты по гайдам Material 3 дают полный контроль над размером.

**Минусы:**

- Готовых «полных» Material-наборов под Svelte меньше; SMUI есть, но менее богат, чем MUI/Vuetify.
- Чтобы получить «как Material» без тяжёлой библиотеки, придётся больше верстать самому (по Material Design 3 токенам) или комбинировать Tailwind с Material Web (web components).

**Риски:** средние (меньше готовых решений под Material; экосистема меньше Vue/React).

**Маловесность:** отличная.

---

### 4. Preact + Vite + Material Web Components (MWC)

**Состав:** Preact (совместим с React API), Vite, **Material Web** (Google, web components), минимальная обвязка для роутинга.

**Плюсы:**

- **Очень малый** runtime (Preact ~3 KB).
- Material Web — официальные компоненты Google (Material 3); маловесны, без фреймворка внутри.
- Можно писать «как на React» (Preact), но с меньшим бандлом.

**Минусы:**

- Интеграция Preact + MWC менее привычна, чем React + MUI; документации и примеров меньше.
- Не все сценарии (сложные формы, таблицы) так же хорошо покрыты, как во Vue/React-библиотеках.

**Риски:** средние (менее стандартный путь).

**Маловесность:** отличная.

---

## Сравнение по критериям

| Критерий              | React + MUI   | Vue + Vuetify | SvelteKit + MD-style | Preact + MWC   |
|-----------------------|---------------|---------------|----------------------|----------------|
| Material Design       | ⭐⭐⭐ готовый  | ⭐⭐⭐ готовый  | ⭐⭐ донастройка      | ⭐⭐⭐ готовый   |
| Маловесность          | ⭐⭐           | ⭐⭐⭐          | ⭐⭐⭐                 | ⭐⭐⭐           |
| Минимизация рисков    | ⭐⭐⭐          | ⭐⭐⭐          | ⭐⭐                  | ⭐⭐             |
| UX из коробки         | ⭐⭐⭐          | ⭐⭐⭐          | ⭐⭐                  | ⭐⭐             |
| Скорость разработки   | ⭐⭐⭐          | ⭐⭐⭐          | ⭐⭐                  | ⭐⭐             |

---

## Рекомендация

**Оптимальный баланс «Material + малый вес + минимум рисков»:** **Vue 3 + Vite + Vuetify 3**.

- **Material Design** закрыт Vuetify без необходимости изобретать компоненты.
- Бандл обычно легче, чем у связки React + MUI, при сопоставимом наборе фич.
- Стек стабильный, с хорошей документацией и комьюнити.
- Для дашборда (формы, таблицы, настройки, чат) Vue + Vuetify подходит очень хорошо.

**Альтернатива при приоритете «максимально лёгкий фронт»:** **SvelteKit + Tailwind + Material 3 токены** (и при необходимости SMUI или кастомные компоненты по гайдам Material). Риск выше за счёт меньшей «готовности» Material-компонентов под Svelte.

**Если важнее всего экосистема и кадры:** **React + Vite + MUI** — самый безопасный выбор по количеству материалов и разработчиков; маловесность достигается за счёт lazy-роутов и аккуратного подключения компонентов MUI.

---

## Архитектура внедрения

1. **Backend остаётся Flask:** текущие маршруты дашборда (настройки, сохранение) постепенно дублируются или заменяются на **REST API** (JSON). Auth — по возможности без смены схемы: cookie-based сессия (как сейчас) с `SameSite`, `Secure` и CORS только с origin фронта.
2. **Фронт — отдельное приложение** в репозитории, например `frontend/` (Vite-проект). В dev: `npm run dev` на своём порту (например 5173); Flask на 8080. Прокси в Vite на `/api` → `http://localhost:8080`, чтобы запросы шли без CORS-проблем.
3. **Production:** либо Flask отдаёт собранную статику из `frontend/dist` и все не-API пути отдают `index.html` (SPA fallback), либо статику отдаёт nginx, а Flask только на `/api/*`.
4. **Миграция по шагам:** сначала одна страница (например «Модель» или «Чат») на новом стеке; остальное можно временно оставить на старых Flask-шаблонах или переключать по мере готовности.

---

## Итог

- **Рекомендованный вариант:** **Vue 3 + Vite + Vuetify 3** — Material Design, хорошая маловесность, низкие риски, удобный UX для дашборда.
- **Альтернативы:** React + MUI (максимум экосистемы), SvelteKit + Tailwind + Material-стиль (максимум лёгкости при большей кастомной работе).

Дальше можно зафиксировать выбранный стек в `AGENTS.md` или в README и добавить каркас проекта в `frontend/` (Vite + Vue + Vuetify или выбранный вариант).
