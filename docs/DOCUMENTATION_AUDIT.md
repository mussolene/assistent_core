# Аудит документации проекта Assistant Core

Отчёт технического писателя: состояние документации, рекомендации по исправлению, написанию, удалению, перемещению и оформлению.

---

## 1. Обзор текущего состояния

### 1.1 Карта документов

| Файл | Назначение | Язык | Аудитория |
|------|------------|------|-----------|
| **Корень** | | | |
| README.md | Главная страница проекта, быстрый старт | RU | Все |
| AGENTS.md | Правила для агента (Cursor), архитектура, workflow | RU | Агент/разработчик |
| CHANGELOG.md | История изменений (Keep a Changelog) | EN | Все |
| **assistant/README.md** | Детальная документация: запуск, память, скиллы, безопасность | RU/EN смешанно | Разработчик/оператор |
| **docs/** | | | |
| ITERATIONS_ROADMAP.md | Дорожная карта итераций (блоки 1–10), статусы | RU | Команда/агент |
| ROADMAP.md | План развития: тесты, авторизация, pairing, Dashboard | RU | Команда/продукт |
| TASKS_SKILL.md | Спецификация скилла «Задачи» | RU | Разработчик/агент |
| TASKS_REQUIREMENTS.md | Расширенные требования по задачам | RU | Разработчик |
| GIT_SKILL.md | Спецификация скилла git (clone, MR/PR, search_repos) | RU | Разработчик |
| MCP_DEV_SERVER.md | MCP для агента: HTTP/SSE, настройка, примеры curl | RU | Разработчик/оператор |
| TELEGRAM_CHANNEL.md | Реализация канала Telegram, сравнение с OpenClaw | RU | Разработчик |
| CHANNELS_AND_FRONTEND.md | Как добавить канал, варианты фронта (A/B) | RU | Разработчик |
| DASHBOARD_AUTH.md | Авторизация дашборда: поток, Redis, роли, API /api/session | RU | Разработчик |
| RAG_QDRANT.md | RAG и коллекции Qdrant (repos, documents, conversation_memory) | RU | Разработчик |
| DOCKER_UPDATE_WITHOUT_REBUILD.md | Обновление кода без пересборки (volume, cron, entrypoint) | RU | Оператор |
| BACKEND_STACK.md | Почему Flask достаточен, когда думать о смене | RU | Архитектор |
| FRONTEND_STACK.md | Выбор стека фронта (Vue/Vuetify, React/MUI, Svelte, Preact) | RU | Архитектор |
| AUDIT.md | Аудит проекта: требования, тесты, приёмка, рефакторинг | RU | Команда |
| AUDIT_V2.md | Повторный аудит после этапов A, B, C (безопасность, юзабилити) | RU | Команда |
| ACCEPTANCE.md | Чек-лист приёмочного тестирования | RU | QA/релиз |

**Итого:** 20 markdown-файлов; корневые README/AGENTS/CHANGELOG + assistant/README + 17 в docs/.

### 1.2 Что сделано хорошо

- Чёткое разделение: пользовательский вход (README) vs правила агента (AGENTS.md) vs внутренние планы (ROADMAP, ITERATIONS_ROADMAP).
- Ссылки из корневого README на ключевые документы (TASKS_SKILL, GIT_SKILL, MCP_DEV_SERVER, DOCKER_UPDATE, ACCEPTANCE, AUDIT, ROADMAP, AUDIT_V2).
- Конкретные инструкции: MCP (curl), Docker без пересборки, приёмка (чек-листы).
- Единый стиль таблиц и заголовков в большинстве документов.

### 1.3 Выявленные проблемы

1. **Нет единой точки входа в docs/** — индекс (README или INDEX) в docs/ отсутствует; часть документов не упомянута в корневом README.
2. **Смешение языков** — CHANGELOG и фрагменты assistant/README на английском; остальное в основном на русском. Нет явного выбора «документация на RU».
3. **Дублирование и устаревание** — в TASKS_SKILL.md раздел «Планируемые расширения» помечен как «10.5–10.8 — сделано», но заголовок всё ещё «Планируемые». AUDIT и AUDIT_V2 частично перекрываются по темам (безопасность, приёмка).
4. **Несогласованность ссылок** — в CHANNELS_AND_FRONTEND ссылки на FRONTEND_STACK: то `[docs/FRONTEND_STACK.md](FRONTEND_STACK.md)` (путь в тексте и target разные); лучше единообразно `[FRONTEND_STACK.md](FRONTEND_STACK.md)` из docs/.
5. **Структура репозитория в README** — в дереве указан `vector-db` в docker-структуре AGENTS.md, в реальном docker-compose отдельного сервиса vector-db может не быть (Qdrant опционально); в корневом README дерева `vector-db` нет — стоит проверить и унифицировать.
6. **«Украшательства»** — минимум: нет бейджей в docs/, нет простых диаграмм (Mermaid) там, где они помогли бы (например, поток событий MCP, поток авторизации).
7. **Отсутствующие ссылки из README** — RAG_QDRANT, CHANNELS_AND_FRONTEND, TELEGRAM_CHANNEL, DASHBOARD_AUTH, BACKEND_STACK, FRONTEND_STACK в корневом README не приведены; при желании их можно добавить в блок «Разработка и тесты» или в отдельный подраздел «Документация».

---

## 2. Рекомендации по содержанию

### 2.1 Исправления

| Документ | Что исправить |
|----------|----------------|
| **TASKS_SKILL.md** | Раздел «Планируемые расширения» переименовать в «Реализованные расширения (10.5–10.8)» и убрать формулировки «сделано» из перечисления или вынести в краткий итог. |
| **AUDIT_V2.md** | В задаче 2 указано «Выполняю» — заменить на «✅» и при необходимости добавить ссылку на README (SECRET_KEY, HTTPS). |
| **assistant/README.md** | Секция «Known limitations» и часть «Memory» — перевести на русский для единообразия или явно пометить блок «English summary» и оставить один основной язык. |
| **CHANNELS_AND_FRONTEND.md** | Ссылки на FRONTEND_STACK: использовать относительные `[FRONTEND_STACK.md](FRONTEND_STACK.md)` (при просмотре из docs/). |
| **README.md** | В структуре репозитория проверить соответствие реальности (например, наличие `deploy.yml`, `docker-compose.override.example.yml`). Убедиться, что упомянут `.env.example` и при необходимости `docker-compose.override.example.yml`. |

### 2.2 Дополнить

| Документ | Что добавить |
|----------|--------------|
| **README.md** | Краткий подраздел «Документация» со ссылками на: RAG и Qdrant ([docs/RAG_QDRANT.md](docs/RAG_QDRANT.md)), каналы и фронт ([docs/CHANNELS_AND_FRONTEND.md](docs/CHANNELS_AND_FRONTEND.md)), авторизация дашборда ([docs/DASHBOARD_AUTH.md](docs/DASHBOARD_AUTH.md)), канал Telegram ([docs/TELEGRAM_CHANNEL.md](docs/TELEGRAM_CHANNEL.md)). Опционально: выбор стека фронта/бэкенда (FRONTEND_STACK, BACKEND_STACK) для разработчиков. |
| **docs/** | Файл **docs/README.md** (индекс документации): краткий список всех документов по категориям (Старт и запуск, Скиллы, Каналы и фронт, Эксплуатация, Планы и аудит) с одной строкой описания каждого. |
| **.env.example** | В комментарии вверху указать: «См. также README и assistant/README.md — разделы про конфигурацию и безопасность (SECRET_KEY, HTTPS).» |
| **ACCEPTANCE.md** | Добавить пункт про быструю привязку Telegram (код + magic-ссылка) и /settings, если это уже в продукте. |

### 2.3 Удаление и объединение

| Действие | Рекомендация |
|----------|--------------|
| **Не удалять** | Все текущие документы имеют смысл; удалять целиком не рекомендуется. |
| **Объединение** | AUDIT и AUDIT_V2 можно оставить как есть (разные срезы: общий vs после A–B–C). При желании в AUDIT в начале добавить одну строку: «Продолжение и фокус на безопасности/юзабилити — docs/AUDIT_V2.md». |
| **Устаревшие формулировки** | Убрать из TASKS_SKILL и TASKS_REQUIREMENTS фразы вида «10.9» если такой итерации нет в ITERATIONS_ROADMAP; привести номера итераций в соответствие с ITERATIONS_ROADMAP. |

### 2.4 Язык документации

- **Рекомендация:** зафиксировать в AGENTS.md или в этом аудите: «Пользовательская и внутренняя документация — на русском; CHANGELOG и метаданные (лицензия, Contributing) могут оставаться на английском для совместимости с экосистемой (GitHub, Keep a Changelog).»
- assistant/README: либо перевести секции «Known limitations» и «License» на русский, либо оставить короткий блок «English» в конце и основной текст на русском.

---

## 3. Рекомендации по структуре и перемещению

### 3.1 Оставить как есть

- Корень: README.md, AGENTS.md, CHANGELOG.md.
- assistant/README.md — детальная техническая документация пакета.
- docs/ — вся тематическая документация в одной папке; разбивать на подпапки (skills/, operations/, planning/) не обязательно для текущего объёма.

### 3.2 Перемещение

- **Не перемещать** файлы между корнем и docs/ без веской причины. Исключение: если позже появится отдельная папка `docs/architecture/`, можно перенести туда BACKEND_STACK, FRONTEND_STACK, CHANNELS_AND_FRONTEND — но это опционально.

### 3.3 Индекс docs (новый файл)

Создать **docs/README.md** со следующей структурой (пример):

```markdown
# Документация Assistant Core

## Старт и запуск
- [Быстрый старт и конфигурация](../README.md) — корневой README
- [Запуск без Docker, память, скиллы](../assistant/README.md) — assistant/README
- [Обновление кода без пересборки](DOCKER_UPDATE_WITHOUT_REBUILD.md)

## Скиллы и возможности
- [Скилл «Задачи» (tasks)](TASKS_SKILL.md)
- [Требования к задачам](TASKS_REQUIREMENTS.md)
- [Git + GitLab/GitHub](GIT_SKILL.md)
- [RAG и Qdrant](RAG_QDRANT.md)

## Каналы и фронтенд
- [Канал Telegram](TELEGRAM_CHANNEL.md)
- [Каналы связи и фронтенд](CHANNELS_AND_FRONTEND.md)
- [Выбор стека фронтенда](FRONTEND_STACK.md)
- [Бэкенд (Flask)](BACKEND_STACK.md)
- [Авторизация дашборда](DASHBOARD_AUTH.md)

## Агент и MCP
- [MCP для агента (HTTP/SSE)](MCP_DEV_SERVER.md)

## Эксплуатация и приёмка
- [Приёмочное тестирование](ACCEPTANCE.md)

## Планы и аудит
- [Дорожная карта итераций](ITERATIONS_ROADMAP.md)
- [План развития (тесты, авторизация, Dashboard)](ROADMAP.md)
- [Аудит проекта](AUDIT.md)
- [Повторный аудит (A, B, C)](AUDIT_V2.md)
```

Так у разработчиков будет одна точка входа в docs/.

---

## 4. Рекомендации по оформлению («украшательства»)

### 4.1 Минимальные правки (без смены вёрстки)

- **Единообразие заголовков:** в docs везде использовать `# Заголовок` для заголовка документа и `##` / `###` для подразделов; не смешивать с эмодзи в заголовках, если в других файлах их нет (или наоборот — везде один стиль).
- **Таблицы:** по возможности оставлять выравнивание по границам столбцов (как уже сделано в большинстве мест).
- **Ссылки:** везде явно указывать путь относительно репозитория при ссылке из корня (например `docs/...`) и относительные при ссылке из docs (например `FRONTEND_STACK.md`).

### 4.2 Умеренные улучшения

- **Бейджи в docs/README (индекс):** при создании docs/README.md можно добавить вверху одну строку: «Документация проекта Assistant Core» и, при желании, бейдж «Docs» (без обязательного CI для доков).
- **Mermaid-диаграммы (опционально):** в 1–2 ключевых местах добавить простые диаграммы:
  - **MCP_DEV_SERVER.md:** поток «клиент → POST /confirmation → Telegram → пользователь жмёт кнопку → SSE event» (sequence diagram).
  - **DASHBOARD_AUTH.md:** поток «запрос → require_auth → Redis session → роль» (flow).
  GitHub и многие просмотрщики Markdown поддерживают Mermaid; это улучшит читаемость без перегрузки.
- **README (корень):** уже есть бейджи CI и License — достаточно. При желании можно добавить бейдж «Documentation» со ссылкой на docs/README.md.

### 4.3 Чего избегать

- Не дублировать большие куски текста между README и assistant/README; оставлять перекрёстные ссылки.
- Не вводить избыточную визуальную стилизацию (много эмодзи, цветовые теги в markdown) — проект технический, приоритет — ясность.

---

## 5. Краткий чек-лист действий

| # | Действие | Приоритет |
|---|----------|------------|
| 1 | Создать **docs/README.md** (индекс документации) | Высокий |
| 2 | В корневом README добавить подраздел «Документация» со ссылками на RAG_QDRANT, CHANNELS_AND_FRONTEND, DASHBOARD_AUTH, TELEGRAM_CHANNEL | Высокий |
| 3 | В TASKS_SKILL переименовать «Планируемые расширения» и привести статусы 10.5–10.8 | Средний |
| 4 | В AUDIT_V2 задачу 2 отметить выполненной, проверить README на SECRET_KEY/HTTPS | Средний |
| 5 | В CHANNELS_AND_FRONTEND унифицировать ссылки на FRONTEND_STACK (относительные из docs/) | Низкий |
| 6 | Зафиксировать язык доки в AGENTS.md или здесь (RU основной; EN — CHANGELOG, Contributing) | Низкий |
| 7 | Опционально: 1–2 Mermaid-диаграммы в MCP_DEV_SERVER и DASHBOARD_AUTH | Низкий |
| 8 | В ACCEPTANCE добавить пункты про pairing по коду и /settings | Низкий |

---

## 6. Итог

- **Состояние документации в целом хорошее:** есть главная страница, правила для агента, детальная техническая документация и планы. Основные пробелы — отсутствие индекса в docs/ и неполные ссылки из корневого README на все тематические документы.
- **Рекомендуемый минимум:** создать docs/README.md, добавить в корневой README подраздел «Документация» со ссылками на ключевые доки, поправить устаревшие формулировки в TASKS_SKILL и AUDIT_V2.
- **Украшательства:** умеренные — единый стиль ссылок и заголовков, опционально 1–2 Mermaid-диаграммы и бейдж в docs/README. Без перегрузки визуалом.

После внесения изменений имеет смысл пройти по новым ссылкам (например `make docs-check` или ручная проверка) и убедиться, что все целевые файлы существуют.
